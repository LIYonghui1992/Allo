<include file="Home:DN_header" />
<include file="Home:DNnav" />
<div class="fmian" >
	<div class="layout_list" >
 
		<div class="design_main" style="margin-top:30px;">
			
			<!-- display:none; -->
			<div id="msgbox" style="display:none;margin:0px auto;width:1080px;height:50px;margin-top:20px;border:1px solid #e60012;
				background-color:#fff4f9;">
				<div style="width:23px;height:23px;margin-top:15px;margin-left:10px;float:left;">
					<img src="../Public/image/error.jpg" style="width:23px;height:23px;"/>
				</div>
				<div style="height:23px;margin-top:17px;margin-left:15px;float:left;">
					<font id="msg" style="font-size:12px;font-weight:bold;color:#e60012;"></font>
				</div>
				
			</div>
			<div style="margin:0px auto;width:1080px;height:20px;margin-top:20px;padding-bottom:20px;border-bottom:1px solid #DDD;border-bottom:1px solid #DDD;">
				<font style="font-size:14px;color:#666;">
			 If uploading your images does not work, please e-mail your design to </font>
			 
			 <a href="mailto:designnest@allocacoc.com">
			 	<font style="font-size:14px;font-weight:bold;color:#884697;">
			 designnest@allocacoc.com</font>
			 </a>
      </div>
			
			<div id="shipping-2" style="margin:0px auto;width:1080px;height:600px;margin-top:10px;"> 
				
				<div class="shipping-div" style="margin-top:15px;">
					<font style="font-size:14px;font-weight:bold;font-color:#666666;">Your idea</font>
				</div>
				
				<div class="shipping-div"> 
					<div class="shipping-field" style="padding-top:8px;"><font class="item_font" >Project title*</font></div>
					<input name="project_title" id="project_title" type="text" class="shipping-input"  value="your project title"  
					onfocus="if (value =='your project title'){value ='';this.style.color='#333'}" onblur="if (value ==''){value='your project title';this.style.color='#999'}"/>
				</div>
				
				
				<div class="shipping-div"> 
					<div class="shipping-field" style="padding-top:8px;"><font class="item_font">Name*</font></div>
					<input name="firstname" id="firstname"  type="text" class="shipping-input" style="width:238px;" value="first name"
					 onfocus="if (value =='first name'){value ='';this.style.color='#333'}" onblur="if (value ==''){value='first name';this.style.color='#999'}" />
					<input name="lastname" type="text" id="lastname" class="shipping-input" style="width:238px; margin-left:10px;" value="last name" 
					onfocus="if (value =='last name'){value ='';this.style.color='#333'}" onblur="if (value ==''){value='last name';this.style.color='#999'}"/>
				</div>
				
				
				<div class="shipping-div">
					<div class="shipping-field" style="padding-top:8px;"><font class="item_font" >e-mail*</font></div>
					<input name="email" id="email" type="text" class="shipping-input"  value="your e-mail address" 
					onfocus="if (value =='your e-mail address'){value ='';this.style.color='#333'}" onblur="if (value ==''){value='your e-mail address';this.style.color='#999'}"/>
				</div>
				
			
				<div class="shipping-div">
					<div class="shipping-field" style="padding-top:8px;"><font class="item_font" >Country*</font></div>
					<input name="countrylist" id="countrylist" type="text" class="shipping-input"  value="your country" 
					onfocus="if (value =='your country'){value ='';this.style.color='#333'}" onblur="if (value ==''){value='your country';this.style.color='#999'}"/>								
				</div>
				
				<!-- editor -->
    	  <div class="shipping-div" >
    	  	<div class="shipping-field" style="padding-top:8px;"><font class="item_font" >Project description*</font></div> 
    	    <div style="float:right;margin-right:10px;width:510px;height:auto;">
    	    	<script id="editor" type="text/plain" style="width:508px;height:260px;">
            </script> 
    	    </div>
  	    	   	     
          
        </div>
	      <!-- editor -->	
			
		  </div>
		
	</div> <!-- design main-->
	
	<div style="width:100%;height:1px;"></div>


	<div style="width:100%;height:30px;padding:25px 0px;border-top:1px solid #DDD;"> 
		 <div style="width:1080px;margin:0px auto;color:#999;" >
				<div class="do_submit">
  		    <a href="javascript:submit1();" id="buttonhref"> 
  		  	 <font style="font-size:16px;color:#FFF;line-height:50px;" id="buttontip"> submit your idea</font>
  		    </a> 		
        </div>
			</div>
				
	</div>




<script type="text/javascript" charset="utf-8" src="/editor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="/editor/ueditor.all.js"> </script>
<script type="text/javascript" charset="utf-8" src="/editor/lang/en/en.js"></script>
    
<script type="text/javascript">
 	$(document).ready(function()
  {		//document.getElementById("logo").src="../Public/image/DN_logo.png";
    		document.getElementById("pathguide").innerHTML += '<img src="../Public/image/arrow_footer.png"/>'
    		+'<a href="{:U(\'DesignNest/index\')}">'+"{$Think.lang.DESIGN_CHALLENGE}"+'</a>'
    		+'<img src="../Public/image/arrow_footer.png"/>'
    		+'<a>submit your design</a>';
    		
  });
  
  var ue = UE.getEditor('editor',
  {
  	 //关闭字数统计
     wordCount:false,
     //关闭elementPath
     elementPathEnabled:false,
     autoHeightEnabled:false,
     imagePopup:false,
     maxUndoCount:0,
     lang:"en",
     enableAutoSave: false,
     saveInterval:3600000 ,//ms
  	toolbars: [
      [
          'bold', //加粗
          'italic', //斜体
          'underline', //下划线
          'justifyleft', //居左对齐
          'justifyright', //居右对齐
          'justifycenter', //居中对齐
          'justifyjustify', //两端对齐
          'insertorderedlist', //有序列表
          'insertunorderedlist', //无序列表
          'fontsize', //字号
          'fontfamily', //字体
          'simpleupload', //单图上传
         // 'insertimage', //多图上传
          //'insertvideo', //视频    
          //'source',     
      ]
  ]
  });
   
   
	function check_general_input()
	{
		
		if(document.getElementById("project_title").value=='' || document.getElementById("project_title").value== 'your project title')
		{
			 document.getElementById("msg").innerHTML ='project title cannot be empty!';
			 document.getElementById("msgbox").style.display="block"; 
			 return false;
		}
		if(document.getElementById("firstname").value=='' || document.getElementById("firstname").value== 'first name')
		{
			 document.getElementById("msg").innerHTML ='first name cannot be empty!';
			 document.getElementById("msgbox").style.display="block"; 
			 return false;
		}
		if(document.getElementById("lastname").value=='' || document.getElementById("lastname").value== 'last name')
		{
			 document.getElementById("msg").innerHTML ='last name cannot be empty!';
			 document.getElementById("msgbox").style.display="block"; 
			 return false;
		}
		if(document.getElementById("email").value=='' || document.getElementById("email").value== 'your e-mail address')
		{
			 document.getElementById("msg").innerHTML ='your e-mail address cannot be empty!';
			 document.getElementById("msgbox").style.display="block"; 
			 return false;
		}
		
		if(document.getElementById("countrylist").value=='' || document.getElementById("countrylist").value== 'your country')
		{
			 document.getElementById("msg").innerHTML ='your country cannot be empty!';
			 document.getElementById("msgbox").style.display="block"; 
			 return false;
		}
		if (!(/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(document.getElementById("email").value))) {
						document.getElementById("msg").innerHTML = 'Please enter a valid mailbox!';
						document.getElementById("msgbox").style.display="block"; 
						return false;
		}
		
		return true;
	}
	
	function submit1()
	{
		//alert(getFeatureText());return false;
		//hide error msg first
		document.getElementById("msg").innerHTML ='';
		document.getElementById("msgbox").style.display="none"; 
			 
		//check general input				
		if(!check_general_input())
		{
			scrollTo(400,300);
			 return false;
		}
		
		var url = "{:U('DesignNest/submit_designidea')}";
		
		var data =  { 
			project_title: document.getElementById("project_title").value, 
			firstname: document.getElementById("firstname").value,
			lastname: document.getElementById("lastname").value,
			email: document.getElementById("email").value,
			countryid: document.getElementById("countrylist").value,			
			project_desc:UE.getEditor('editor').getContent(),
			};
			
			
			document.getElementById("buttonhref").href='#';
			document.getElementById("buttontip").innerHTML='processing';

		$.post(url,data,function(data){

					if(data.status == 1){							

						//alert('succ');
						
						var window_height = $(window).height();
  					if(window_height<800)
  					{
  						maxHeight=window_height*0.7;
  						_top=0;
  						_width='80%';
  					}else{
  						maxHeight='600px';
  						_top='115px';
  						_width='60%';
  					}
			
						art.dialog({
							title: 'Congratulations!',
							content: 'Thank you for submitting your idea. We will look at it and get back to you as soon as possible.',
							 lock:true,
							 width: _width,
							 top:_top,
							 style:'succeed noClose',
							 okVal: 'OK',
							 ok:function(){
								window.location = '/DesignNest/index'; 
								}
					 } );
						
					}else{
						document.getElementById("buttonhref").href='javascript:submit1();';
						document.getElementById("buttontip").innerHTML='submit your idea';
						document.getElementById("msg").innerHTML = data.msg;
						document.getElementById("msgbox").style.display="block"; 
						scrollTo(400,300); //alert(data.msg);													
					}
				},"json"); 
				
	}
						
</script>
		
			
					
		
		<style type="text/css">
			/**/
		 .fr-wrapper{max-height:300px;}
		 .fr-element{max-height:260px;}
		 /*
		 .edui-editor-iframeholder {max-height:260px;overflow:auto;}
		 .edui-default{max-height:260px;overflow:auto;}
		 */
		 #editor > img{width:200px;height:150px;}
		 ol{list-style-type:decimal;margin:5px;}
		 ul{list-style:disc inside;margin:5px;}
		 
		 .edui-editor-imagescale{display:none}
		 #edui1_imagescale{display:none !important;}
		 
		 		
		.footer{background-color:#884697}
		.footer .country {BACKGROUND-COLOR: #884697;}
		.shipping-div{float:left;margin-left:10px;width:600px;padding-top:5px;margin-bottom:5px;color:#999;height:40px;}
		.shipping-field{width:80px;float:left;}
		.shipping-input{padding-left:10px;height:30px;margin:0px auto;width:500px;margin-left:0px;border:1px solid #CCC;
			font-size:12px;color:#999999;background-color:#EEE;}
		.item_font{font-size:12px;min-width:50px;		}
		.do_submit{height:50px;width:265px;text-align:center;margin-left:80px;
			         border:1px solid #884697; border-radius:30px;overflow:hidden;
			         background-color:#884697;
		}
		div#editor {
          width: 510px;
          height:400px;
          /*float:right;*/
          margin: auto;
          text-align: left;
      }
		</style>
		